{% extends "page.html" %}

{% block main %}
    <div class="container">
        <div id="messages">
            <div class="alert alert-success">
                <p><strong>Looking for your notebooks? They have been migrated to the project named Default Project.</strong></p>
                <p>The GenePattern Notebook Workspace now allows you to divide your work into multiple “projects,” each with its
                    own environment and extensions. For more information about notebook projects,
                    <a href="https://notebook.genepattern.org/basic-features/#notebook-projects" target="_blank">see our documentation</a>.</p>
            </div>
        </div>

        <div id="nb-header">
            <h1>Your Projects</h1>
            <p class="lead">Launch, create or share notebook projects.</p>
            <input type="search" id="nb-search" placeholder="Search Projects" class="form-control" />
            <button id ="nb-new" class="btn btn-primary"><i class="fa fa-plus-circle"></i> New Project</button>
        </div>

        <div id="projects"></div>
    </div>

    <div id="repository-container" class="container">
        <h1>Public Notebooks</h1>
        <p class="lead">Browse, launch and reproduce public notebooks.</p>
    </div>

    {% call modal('Delete Project', btn_class='btn-danger delete-button') %}
        <p>Are you sure that you want to delete this project?</p>
    {% endcall %}

    {% call modal('Create New Project', btn_class='btn-success create-button') %}
        <div class="form-horizontal">
            <div class="form-group">
                <label for="name" class="control-label col-sm-4">Project Name*</label>
                <div class="col-sm-8">
                    <input name="name" type="text" class="form-control" />
                </div>
            </div>
            <div class="form-group">
                <label for="image" class="control-label col-sm-4">Environment*</label>
                <div class="col-sm-8">
                    <select name="image" class="form-control">
                        {% for image in user.spawner.image_whitelist.keys() %}
                            <option value="{{ image }}">{{ image }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="description" class="control-label col-sm-4">Description</label>
                <div class="col-sm-8">
                    <input name="description" type="text" class="form-control" />
                </div>
            </div>
        </div>
    {% endcall %}

    {% call modal('Edit Project', btn_label='Save', btn_class='btn-warning edit-button') %}
        <div class="form-horizontal">
            <div class="form-group">
                <label for="name" class="control-label col-sm-4">Project Name*</label>
                <div class="col-sm-8">
                    <input name="name" type="text" class="form-control" />
                </div>
            </div>
            <div class="form-group">
                <label for="image" class="control-label col-sm-4">Environment*</label>
                <div class="col-sm-8">
                    <select name="image" class="form-control">
                        {% for image in user.spawner.image_whitelist.keys() %}
                            <option value="{{ image }}">{{ image }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="description" class="control-label col-sm-4">Description</label>
                <div class="col-sm-8">
                    <input name="description" type="text" class="form-control" />
                </div>
            </div>
        </div>
    {% endcall %}
{% endblock %}

{% block script %}
    {{ super() }}
    <script type="text/javascript" src="/hub/static/js/projects.js"></script>

    {# TODO: Replace with new functionality for Release 2  #}
    <script type="text/javascript" src="/hub/static/js/library.js"></script>
    <script type="text/javascript">
        {# requirejs(["library"], function(library) {#}
        {#    library.tree_init();#}
        {# });#}
    </script>
{% endblock %}